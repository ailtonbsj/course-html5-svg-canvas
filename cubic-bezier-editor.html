<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Cubic BÃ©zier Curve Viewer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <svg width="100%" height="500px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
       <rect width="100%" height="100%" style="fill:gray;"/>
       <path id="bezier" d="M 10,10 C 10,200 200,200 200,10"
            fill="none" stroke="red" stroke-width="4" />
        <circle id="pointStart" cx="10" cy="10" r="5" style="fill:black;"/>
        <circle id="pointControl1" cx="10" cy="200" r="5" style="fill:black;"/>
        <circle id="pointControl2" cx="200" cy="200" r="5" style="fill:black;"/>
        <circle id="pointEnd" cx="200" cy="10" r="5" style="fill:black;"/>
    </svg>
    <h3>Move the four points to change the curve!</h3>

    <script>
        let posX = 0,
            posY = 0;

        let figure = document.querySelector("svg");
        let pointStart = document.querySelector("svg #pointStart");
        let pointEnd = document.querySelector("svg #pointEnd");
        let pointControl1 = document.querySelector("svg #pointControl1");
        let pointControl2 = document.querySelector("svg #pointControl2");
        let bezier = document.querySelector("svg #bezier");

        let isLocked = false;
        let objectGetted = null;

        function moving(event) {
            if (event.touches) {
                posX = event.touches[0].clientX;
                posY = event.touches[0].clientY;
            } else {
                posX = event.clientX;
                posY = event.clientY;
            }
            console.log();
            if (isLocked) {
                objectGetted.setAttribute("cx", posX);
                objectGetted.setAttribute("cy", posY);
                let startX = pointStart.getAttribute("cx");
                let startY = pointStart.getAttribute("cy");
                let ctl1X = pointControl1.getAttribute("cx");
                let ctl1Y = pointControl1.getAttribute("cy");
                let ctl2X = pointControl2.getAttribute("cx");
                let ctl2Y = pointControl2.getAttribute("cy");
                let endX = pointEnd.getAttribute("cx");
                let endY = pointEnd.getAttribute("cy");
                let d = `M ${startX},${startY} C ${ctl1X},${ctl1Y} ${ctl2X},${ctl2Y} ${endX},${endY}`;
                bezier.setAttribute("d", d);
            }
        }

        figure.onmousemove = moving;
        figure.ontouchmove = moving;

        function startMove() {
            objectGetted = this;
            isLocked = true;
        }

        function endMove() {
            isLocked = false;
        }

        document.querySelectorAll("svg circle").forEach(function(circle) {
            circle.onmousedown = startMove;
            circle.ontouchstart = startMove;
        });

        document.querySelectorAll("svg circle").forEach(function(circle) {
            circle.onmouseup = endMove;
            circle.ontouchend = endMove;
        });
    </script>
</body>

</html>